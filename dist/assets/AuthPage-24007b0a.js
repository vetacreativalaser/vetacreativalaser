import{c as S,r,v as w,u as I,j as e,m as k,L as j,I as d,B as y,t as x,s as F,a as R}from"./index-398056f1.js";import{L as m}from"./label-5befe9e8.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=S("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=S("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),D=({isAuthPageContext:s=!1})=>{const[n,h]=r.useState(""),[o,u]=r.useState(""),[i,l]=r.useState(!1),p=w(),{login:f}=I(),g=async c=>{if(c.preventDefault(),!n||!o){x({title:"Faltan datos",description:"Completa todos los campos",variant:"destructive"});return}l(!0);try{await F.auth.signOut();const{error:a}=await f({email:n,password:o});if(a)throw new Error(a.message||"Correo o contraseña incorrectos.");x({title:"Inicio de sesión exitoso",description:"¡Bienvenido de nuevo!"}),p("/perfil")}catch(a){x({title:"Error de inicio de sesión",description:a.message||"No se pudo iniciar sesión.",variant:"destructive"})}finally{l(!1)}},b=s?"w-full space-y-8 p-8 sm:p-10 bg-white shadow-xl border border-gray-200":"min-h-screen flex items-center justify-center py-8 px-4 sm:px-6 lg:px-8 bg-gray-50",v=s?b:"max-w-md w-full space-y-8 p-8 sm:p-10 bg-white shadow-xl border border-gray-200";return e.jsx("div",{className:s?"":b,children:e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:v,children:[e.jsxs("div",{children:[e.jsx(P,{className:"mx-auto h-12 w-auto text-black",strokeWidth:1.5}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-semibold tracking-tight text-black",children:"Inicia sesión en tu cuenta"}),!s&&e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["O"," ",e.jsx(j,{to:"/auth?mode=register",className:"font-medium text-black hover:underline",children:"crea una cuenta nueva"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email-address",children:"Correo electrónico"}),e.jsx(d,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:c=>h(c.target.value),className:"mt-1 border-gray-300 focus:border-black focus:ring-black",placeholder:"tu.email@ejemplo.com",disabled:i})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"password",children:"Contraseña"}),e.jsx(d,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:o,onChange:c=>u(c.target.value),className:"mt-1 border-gray-300 focus:border-black focus:ring-black",placeholder:"Tu contraseña",disabled:i})]})]}),e.jsx("div",{className:"flex items-center justify-end text-sm",children:e.jsx(j,{to:"/forgot-password",className:"font-medium text-black hover:underline",children:"¿Olvidaste tu contraseña?"})}),e.jsx("div",{children:e.jsx(y,{type:"submit",className:"w-full bg-black text-white hover:bg-gray-800",disabled:i,children:i?"Iniciando...":"Iniciar Sesión"})})]})]})})},M=({isAuthPageContext:s=!1})=>{const[n,h]=r.useState(""),[o,u]=r.useState(""),[i,l]=r.useState(""),[p,f]=r.useState(""),[g,b]=r.useState(""),v=w(),{register:c}=I(),[a,N]=r.useState(!1),L=async t=>{if(t.preventDefault(),p!==g){x({title:"Error de registro",description:"Las contraseñas no coinciden.",variant:"destructive"});return}N(!0);try{await c({name:n,email:o,phone:i,password:p}),x({title:"Registro exitoso",description:`¡Bienvenido, ${n}! Revisa tu correo para confirmar tu cuenta.`}),v("/perfil")}catch(E){x({title:"Error de registro",description:E.message,variant:"destructive"})}finally{N(!1)}},C=s?"w-full space-y-8 p-8 sm:p-10 bg-white shadow-xl border border-gray-200":"min-h-screen flex items-center justify-center py-8 px-4 sm:px-6 lg:px-8 bg-gray-50",q=s?"":"max-w-md w-full space-y-8 p-8 sm:p-10 bg-white shadow-xl border border-gray-200";return e.jsx("div",{className:s?"":C,children:e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:s?C:q,children:[e.jsxs("div",{children:[e.jsx(B,{className:"mx-auto h-12 w-auto text-black",strokeWidth:1.5}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-semibold tracking-tight text-black",children:"Crea tu cuenta"}),!s&&e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["¿Ya tienes una?"," ",e.jsx(j,{to:"/auth?mode=login",className:"font-medium text-black hover:underline",children:"Inicia sesión aquí"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:L,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nombre completo"}),e.jsx(d,{id:"name",name:"name",type:"text",required:!0,value:n,onChange:t=>h(t.target.value),className:"mt-1 border-gray-300 focus:border-black focus:ring-black",placeholder:"Tu nombre completo",disabled:a})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email-address",children:"Correo electrónico"}),e.jsx(d,{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:t=>u(t.target.value),className:"mt-1 border-gray-300 focus:border-black focus:ring-black",placeholder:"tu.email@ejemplo.com",disabled:a})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"phone",children:"Número de teléfono (Opcional)"}),e.jsx(d,{id:"phone",name:"phone",type:"tel",value:i,onChange:t=>l(t.target.value),className:"mt-1 border-gray-300 focus:border-black focus:ring-black",placeholder:"Tu número de teléfono",disabled:a})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"password",children:"Contraseña (mín. 6 caracteres)"}),e.jsx(d,{id:"password",name:"password",type:"password",required:!0,value:p,onChange:t=>f(t.target.value),className:"mt-1 border-gray-300 focus:border-black focus:ring-black",placeholder:"Crea una contraseña",disabled:a})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"confirm-password",children:"Confirmar contraseña"}),e.jsx(d,{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:g,onChange:t=>b(t.target.value),className:"mt-1 border-gray-300 focus:border-black focus:ring-black",placeholder:"Confirma tu contraseña",disabled:a})]})]}),e.jsx("div",{children:e.jsx(y,{type:"submit",className:"w-full bg-black text-white hover:bg-gray-800",disabled:a,children:a?"Registrando...":"Registrarse"})})]})]})})},U=()=>{const[s,n]=R();w();const h=s.get("mode")||"login",[o,u]=r.useState(h);r.useEffect(()=>{u(s.get("mode")||"login")},[s]);const i=l=>{u(l),n({mode:l})};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center py-8 px-4 sm:px-6 lg:px-8 bg-gray-50",children:e.jsxs(k.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[o==="login"?e.jsx(D,{isAuthPageContext:!0}):e.jsx(M,{isAuthPageContext:!0}),e.jsx("div",{className:"mt-6 text-center",children:o==="login"?e.jsxs("p",{className:"text-sm text-gray-600",children:["¿No tienes una cuenta?"," ",e.jsx(y,{variant:"link",onClick:()=>i("register"),className:"font-medium text-black p-0 h-auto hover:underline",children:"Regístrate aquí"})]}):e.jsxs("p",{className:"text-sm text-gray-600",children:["¿Ya tienes una cuenta?"," ",e.jsx(y,{variant:"link",onClick:()=>i("login"),className:"font-medium text-black p-0 h-auto hover:underline",children:"Inicia sesión aquí"})]})})]})})};export{U as default};
